# -*- Makefile -*-

CC = gcc
SRC = main.c school.c
OBJ = $(SRC: .c=.o)
NAME = school

all: $(NAME)

$(NAME): $(OBJ)
	$(CC) $^ -o $@

%.o: %.c
	$(CC) -c $< -o $@

recompile:
	@for file in $(filter-out $(OBJ), $(wildcard *.c)); do \
		if test $$file -nt $${file%.c}.o; then \
			echo "Recompiling $$file"; \
			$(CC) -c $$file -o $${file%.c}.o; \
		fi \
	done
